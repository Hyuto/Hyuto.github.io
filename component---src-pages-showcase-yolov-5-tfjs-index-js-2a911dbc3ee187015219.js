(self.webpackChunkHyuto_github_io=self.webpackChunkHyuto_github_io||[]).push([[653],{95900:function(e,t,n){var a=n(15301).w_;e.exports.z=function(e){return a({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-83.6 290.5c4.8 4.8 4.8 12.6 0 17.4l-40.5 40.5c-4.8 4.8-12.6 4.8-17.4 0L256 313.3l-66.5 67.1c-4.8 4.8-12.6 4.8-17.4 0l-40.5-40.5c-4.8-4.8-4.8-12.6 0-17.4l67.1-66.5-67.1-66.5c-4.8-4.8-4.8-12.6 0-17.4l40.5-40.5c4.8-4.8 12.6-4.8 17.4 0l66.5 67.1 66.5-67.1c4.8-4.8 12.6-4.8 17.4 0l40.5 40.5c4.8 4.8 4.8 12.6 0 17.4L313.3 256l67.1 66.5z"}}]})(e)}},91904:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(15861),r=n(87757),c=n.n(r),o=n(67294),l=n(42885),i=(n(60767),n(50731)),s=n(32653),u=n(95900),d=JSON.parse('["person","bicycle","car","motorcycle","airplane","bus","train","truck","boat","traffic light","fire hydrant","stop sign","parking meter","bench","bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe","backpack","umbrella","handbag","tie","suitcase","frisbee","skis","snowboard","sports ball","kite","baseball bat","baseball glove","skateboard","surfboard","tennis racket","bottle","wine glass","cup","fork","knife","spoon","bowl","banana","apple","sandwich","orange","broccoli","carrot","hot dog","pizza","donut","cake","chair","couch","potted plant","bed","dining table","toilet","tv","laptop","mouse","remote","keyboard","cell phone","microwave","oven","toaster","sink","refrigerator","book","clock","vase","scissors","teddy bear","hair drier","toothbrush"]'),f=JSON.parse('{"TN":"Object Detection using YOLOv5","WL":"Object Detection Application using YOLOv5 and Tensorflow.js"}');l.G48();var p=function(){var e=(0,o.useState)(null),t=e[0],n=e[1],r=(0,o.useState)("close"),p=r[0],m=r[1],v=(0,o.useState)("close"),b=v[0],h=v[1],y=(0,o.useState)("loading"),g=y[0],k=y[1],w=(0,o.useState)(null),S=w[0],j=w[1],x=(0,o.useRef)(null),E=(0,o.useRef)(null),O=(0,o.useRef)(null),L=(0,o.useRef)(null),R=function(e,t,n){var a=L.current.getContext("2d");a.clearRect(0,0,a.canvas.width,a.canvas.height);var r="18px sans-serif";a.font=r,a.textBaseline="top";for(var c=0;c<t.length;++c)if(t[c]>.35){var o=e.slice(4*c,4*(c+1)),l=o[0],i=o[1],s=o[2],u=o[3];l*=L.current.width,s*=L.current.width,i*=L.current.height;var f=s-l,p=(u*=L.current.height)-i,m=d[n[c]],v=(100*t[c]).toFixed(1);a.strokeStyle="#00FF00",a.lineWidth=2,a.strokeRect(l,i,f,p),a.fillStyle="#00FF00";var b=a.measureText(m+" - "+v+"%").width,h=parseInt(r,10);a.fillRect(l-1,i-(h+2),b+2,h+2),a.fillStyle="#ffffff",a.fillText(m+" - "+v+"%",l-1,i-(h+2))}},C=function(){var e=(0,a.Z)(c().mark((function e(){var n,a,r,o,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O.current.srcObject){e.next=9;break}return l.SRH().startScope(),n=t.inputs[0].shape.slice(1,3),a=n[0],r=n[1],o=l.lub((function(){return l.BHj.resizeBilinear(l.Xhn.fromPixels(O.current),[a,r]).div(255).expandDims(0)})),e.next=6,t.executeAsync(o).then((function(e){var t=e.slice(0,3),n=t[0],a=t[1],r=t[2],c=n.dataSync(),o=a.dataSync(),i=r.dataSync();R(c,o,i),l.B90(e)}));case 6:i=requestAnimationFrame(C),j(i),l.SRH().endScope();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,a.Z)(c().mark((function e(){var n,a,r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.SRH().startScope(),n=t.inputs[0].shape.slice(1,3),a=n[0],r=n[1],o=l.lub((function(){return l.BHj.resizeBilinear(l.Xhn.fromPixels(E.current),[a,r]).div(255).expandDims(0)})),e.next=5,t.executeAsync(o).then((function(e){var t=e.slice(0,3),n=t[0],a=t[1],r=t[2],c=n.dataSync(),o=a.dataSync(),i=r.dataSync();R(c,o,i),l.B90(e)}));case 5:l.SRH().endScope();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){l.YLj(window.location.origin+"/model/yolov5n_web_model/model.json").then((function(e){var t=l.iUs(e.inputs[0].shape);e.executeAsync(t).then((function(a){a.forEach((function(e){e.dataSync()})),l.B90(a),l.B90(t),n(e),k("ready")}))}))}),[]),o.createElement(i.Z,{title:f.TN,description:f.WL},o.createElement("div",{className:"yolov5-tfjs-module--YOLOWrapper--18avy"},o.createElement("div",{className:"yolov5-tfjs-module--title--3YIMQ"},o.createElement("h2",null,f.TN),o.createElement("p",null,f.WL)),o.createElement("div",{className:"yolov5-tfjs-module--content--3yvli"},o.createElement(s.Z,{style:{display:"ready"===g?"none":null}},"Loading model..."),o.createElement("div",{className:"yolov5-tfjs-module--main--3DtK8"},o.createElement("video",{style:{display:"open"===p?"block":"none"},autoPlay:!0,playsInline:!0,muted:!0,ref:O}),o.createElement("img",{style:{display:"open"===b?"block":"none"},src:"#",ref:E}),o.createElement("canvas",{width:640,height:360,style:{display:"open"===p||"open"===b?"block":"none",position:"absolute",top:"0",left:"0"},ref:L}),o.createElement(u.z,{size:30,color:"black",className:"yolov5-tfjs-module--close--1jjII",style:{display:"open"===b?"block":"none"},onClick:function(){var e=L.current.getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height),x.current.value="",E.current.src="#",h("close")}})),o.createElement("div",{className:"yolov5-tfjs-module--btnWrapper--3KLOo"},o.createElement("input",{type:"file",ref:x,accept:"image/*",style:{display:"none"},onChange:function(e){if(null!==e.target.files[0]){var t=e.target.files[0],n=window.URL.createObjectURL(t);E.current.src=n,h("open"),E.current.onload=function(){N(),window.URL.revokeObjectURL(n)}}}}),o.createElement("button",{disabled:"open"===p,onClick:function(){x.current.click()}},"Open Local Image"),o.createElement("button",{disabled:"open"===b,onClick:function(){"close"===p?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then((function(e){window.localStream=e,O.current.srcObject=e,m("open"),O.current.onloadedmetadata=function(){C()}})):alert("Can't open Webcam!"):(cancelAnimationFrame(S),j(null),O.current.srcObject?(O.current.srcObject=null,window.localStream.getTracks().forEach((function(e){e.stop()})),m("close")):alert("Please open Webcam first!"))}},"open"===p?"Close":"Open"," Webcam")))))}}}]);
//# sourceMappingURL=component---src-pages-showcase-yolov-5-tfjs-index-js-2a911dbc3ee187015219.js.map