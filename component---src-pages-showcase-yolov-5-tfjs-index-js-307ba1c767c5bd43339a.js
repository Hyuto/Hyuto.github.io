(self.webpackChunkHyuto_github_io=self.webpackChunkHyuto_github_io||[]).push([[653],{5900:function(e,t,n){var a=n(5301).w_;e.exports.z=function(e){return a({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-83.6 290.5c4.8 4.8 4.8 12.6 0 17.4l-40.5 40.5c-4.8 4.8-12.6 4.8-17.4 0L256 313.3l-66.5 67.1c-4.8 4.8-12.6 4.8-17.4 0l-40.5-40.5c-4.8-4.8-4.8-12.6 0-17.4l67.1-66.5-67.1-66.5c-4.8-4.8-4.8-12.6 0-17.4l40.5-40.5c4.8-4.8 12.6-4.8 17.4 0l66.5 67.1 66.5-67.1c4.8-4.8 12.6-4.8 17.4 0l40.5 40.5c4.8 4.8 4.8 12.6 0 17.4L313.3 256l67.1 66.5z"}}]})(e)}},2239:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var a=n(7294),c=n(3847),r=n(731),o=n(2653),l=n(5900),i=JSON.parse('["person","bicycle","car","motorcycle","airplane","bus","train","truck","boat","traffic light","fire hydrant","stop sign","parking meter","bench","bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe","backpack","umbrella","handbag","tie","suitcase","frisbee","skis","snowboard","sports ball","kite","baseball bat","baseball glove","skateboard","surfboard","tennis racket","bottle","wine glass","cup","fork","knife","spoon","bowl","banana","apple","sandwich","orange","broccoli","carrot","hot dog","pizza","donut","cake","chair","couch","potted plant","bed","dining table","toilet","tv","laptop","mouse","remote","keyboard","cell phone","microwave","oven","toaster","sink","refrigerator","book","clock","vase","scissors","teddy bear","hair drier","toothbrush"]'),s=JSON.parse('{"TN":"Object Detection using YOLOv5","WL":"Object Detection Application using YOLOv5 and Tensorflow.js"}');c.G48();var u=function(){var e=(0,a.useState)(null),t=e[0],n=e[1],u=(0,a.useState)("close"),d=u[0],f=u[1],p=(0,a.useState)("close"),m=p[0],v=p[1],b=(0,a.useState)("loading"),h=b[0],g=b[1],y=(0,a.useState)(.35),k=y[0],w=(y[1],(0,a.useState)(null)),S=w[0],j=w[1],E=(0,a.useRef)(null),O=(0,a.useRef)(null),R=(0,a.useRef)(null),L=(0,a.useRef)(null),x=function(e,t,n){var a=L.current.getContext("2d");a.clearRect(0,0,a.canvas.width,a.canvas.height);var c="18px sans-serif";a.font=c,a.textBaseline="top";for(var r=0;r<t.length;++r)if(t[r]>k){var o=e.slice(4*r,4*(r+1)),l=o[0],s=o[1],u=o[2],d=o[3];l*=L.current.width,u*=L.current.width,s*=L.current.height;var f=u-l,p=(d*=L.current.height)-s,m=i[n[r]],v=(100*t[r]).toFixed(1);a.strokeStyle="#00FF00",a.lineWidth=2,a.strokeRect(l,s,f,p),a.fillStyle="#00FF00";var b=a.measureText(m+" - "+v+"%").width,h=parseInt(c,10);a.fillRect(l-1,s-(h+2),b+2,h+2),a.fillStyle="#ffffff",a.fillText(m+" - "+v+"%",l-1,s-(h+2))}},C=function e(){c.SRH().startScope();var n=t.inputs[0].shape.slice(1,3),a=n[0],r=n[1],o=c.lub((function(){return c.BHj.resizeBilinear(c.Xhn.fromPixels(R.current),[a,r]).div(255).expandDims(0)}));t.executeAsync(o).then((function(e){var t=e.slice(0,3),n=t[0],a=t[1],r=t[2],o=n.dataSync(),l=a.dataSync(),i=r.dataSync();x(o,l,i),c.B90(e)}));var l=requestAnimationFrame(e);j(l),c.SRH().endScope()};return(0,a.useEffect)((function(){c.YLj(window.location.origin+"/model/yolov5n_web_model/model.json").then((function(e){e.executeAsync(c.lls(e.inputs[0].shape)).then((function(t){t.forEach((function(e){e.dataSync()})),c.B90(t),n(e),g("ready"),c.CQI("webgl")}))}))}),[]),a.createElement(r.Z,{title:s.TN,description:s.WL},a.createElement("div",{className:"yolov5-tfjs-module--YOLOWrapper--18avy"},a.createElement("div",{className:"yolov5-tfjs-module--title--3YIMQ"},a.createElement("h2",null,s.TN),a.createElement("p",null,s.WL)),a.createElement("div",{className:"yolov5-tfjs-module--content--3yvli"},a.createElement(o.Z,{style:{display:"ready"===h?"none":null}},"Loading model..."),a.createElement("div",{className:"yolov5-tfjs-module--main--3DtK8"},a.createElement("video",{style:{display:"open"===d?"block":"none"},autoPlay:!0,playsInline:!0,muted:!0,ref:R}),a.createElement("img",{style:{display:"open"===m?"block":"none"},ref:O}),a.createElement("canvas",{width:852,height:480,style:{display:"open"===d||"open"===m?"block":"none",position:"absolute",top:"0",left:"0"},ref:L}),"open"===m?a.createElement(l.z,{size:30,color:"black",className:"yolov5-tfjs-module--close--1jjII",onClick:function(){var e=L.current.getContext("2d"),t=O.current.src;e.clearRect(0,0,e.canvas.width,e.canvas.height),E.current.value="",O.current.src="",window.URL.revokeObjectURL(t),v("close")}}):null),a.createElement("div",{className:"yolov5-tfjs-module--btnWrapper--3KLOo"},a.createElement("input",{type:"file",ref:E,accept:"image/*",style:{display:"none"},onChange:function(e){var n=L.current.getContext("2d");n.clearRect(0,0,n.canvas.width,n.canvas.height);var a=e.target.files[0],r=window.URL.createObjectURL(a);""===O.current.src&&window.URL.revokeObjectURL(O.current.src),O.current.src=r,O.current.onload=function(){!function(){c.SRH().startScope();var e=t.inputs[0].shape.slice(1,3),n=e[0],a=e[1],r=c.lub((function(){return c.BHj.resizeBilinear(c.Xhn.fromPixels(O.current),[n,a]).div(255).expandDims(0)}));t.executeAsync(r).then((function(e){var t=e.slice(0,3),n=t[0],a=t[1],r=t[2],o=n.dataSync(),l=a.dataSync(),i=r.dataSync();x(o,l,i),c.B90(e)})),c.SRH().endScope()}(),v("open")}}}),a.createElement("button",{disabled:"open"===d,onClick:function(){E.current.click()}},"Open Local Image"),a.createElement("button",{disabled:"open"===m,onClick:function(){"close"===d?(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then((function(e){window.localStream=e,R.current.srcObject=e,f("open")})):alert("Can't open Webcam!"),R.current.onloadedmetadata=function(){C()}):(cancelAnimationFrame(S),j(null),R.current.srcObject?(R.current.srcObject=null,window.localStream.getTracks().forEach((function(e){e.stop()})),f("close")):alert("Please open Webcam first!"))}},"open"===d?"Close":"Open"," Webcam")))))}}}]);
//# sourceMappingURL=component---src-pages-showcase-yolov-5-tfjs-index-js-307ba1c767c5bd43339a.js.map